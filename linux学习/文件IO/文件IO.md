文件IO

文件 I/O 也被称为系统 I/O（Input/Output），它涉及到与操作系统进行交互的输入和输出操作。在文件 I/O 中，使用操作系统提供的系统调用（system calls）来执行文件的打开、读取、写入和关闭等操作。

系统调用是操作系统提供给应用程序的接口，用于访问底层的硬件和资源。通过系统调用，应用程序可以请求操作系统执行特定的操作，例如打开文件、读取数据、写入数据、关闭文件等。这些系统调用会将应用程序与操作系统内核进行交互，以完成文件 I/O 的操作。

因此，文件 I/O 也可以被称为系统 I/O，因为它是通过系统调用与操作系统进行交互来实现的。

文件IOAPI

open close  read 

文件描述符概念:

是0-1023的数字,表示文件

open函数用来创建或打开一个文件

int open(const char *pathname,int flags);

int open(const char *pathname,int flags,mode_t mode);

成功时返回文件描述符,出错时返回EOF

创建文件时第三个参数指定新文件的权限,此外真正建文件时的权限会受到umask值的影响,实际权限是mode-umask

close函数:

int close(int fd)`

- 用于关闭一个已打开的文件。
- `fd` 是要关闭的文件描述符。
- 返回值为0表示成功关闭文件；返回-1表示关闭文件失败。

read函数:

ssize_t read(int fd, void *buf, size_t count)`

- 用于从文件中读取数据。
- `fd` 是要读取的文件描述符。
- `buf` 是存放读取数据的缓冲区。
- `count` 是要读取的字节数。
- 返回实际读取的字节数，如果返回值为0表示已到达文件末尾；返回-1表示读取文件失败。



修改文件权限:

`chmod` 和 `fchmod` 是用于修改文件权限的函数，它们在 Linux 中常用于更改文件的访问权限。

1. `int chmod(const char *pathname, mode_t mode)`
   - 用于修改指定文件的权限。
   - `pathname` 是要修改权限的文件路径名。
   - `mode` 是要设置的权限，可以使用 `S_IRUSR`（用户读权限）、`S_IWUSR`（用户写权限）等来设置权限。
   - 返回值为0表示成功修改文件权限；返回-1表示修改文件权限失败。

2. `int fchmod(int fd, mode_t mode)`
   - 用于修改已打开文件的权限。
   - `fd` 是要修改权限的文件描述符。
   - `mode` 是要设置的权限，可以使用 `S_IRUSR`（用户读权限）、`S_IWUSR`（用户写权限）等来设置权限。
   - 返回值为0表示成功修改文件权限；返回-1表示修改文件权限失败。

这两个函数都可以用于修改文件的权限，`chmod` 接受文件路径名作为参数，而 `fchmod` 接受文件描述符作为参数。需要注意的是，修改文件权限需要有足够的权限，通常需要是文件的所有者或具有超级用户权限。同时，需要包含 `<sys/stat.h>` 头文件来使用这些函数。

获取文件属性:

`stat`、`lstat` 和 `fstat` 是在 Linux 中用于获取文件信息的函数。它们可以用来获取文件的属性、权限、大小等信息。

1. `int stat(const char *pathname, struct stat *buf)`
   - 用于获取指定文件的信息。
   - `pathname` 是要获取信息的文件路径名。
   - `buf` 是一个指向 `struct stat` 结构的指针，用于存储获取到的文件信息。
   - 返回值为0表示成功获取文件信息；返回-1表示获取文件信息失败。

2. `int lstat(const char *pathname, struct stat *buf)`
   - 类似于 `stat` 函数，用于获取指定文件的信息。
   - 与 `stat` 函数不同的是，当 `pathname` 是一个符号链接时，`lstat` 函数会返回符号链接本身的信息，而不是链接指向的文件的信息。
   - 返回值为0表示成功获取文件信息；返回-1表示获取文件信息失败。

3. `int fstat(int fd, struct stat *buf)`
   - 用于获取已打开文件的信息。
   - `fd` 是已打开文件的文件描述符。
   - `buf` 是一个指向 `struct stat` 结构的指针，用于存储获取到的文件信息。
   - 返回值为0表示成功获取文件信息；返回-1表示获取文件信息失败。

这些函数都会将获取到的文件信息存储在 `struct stat` 结构中，该结构包含了文件的各种属性，如文件类型、权限、大小、时间等。需要包含 `<sys/types.h>` 和 `<sys/stat.h>` 头文件来使用这些函数和结构。