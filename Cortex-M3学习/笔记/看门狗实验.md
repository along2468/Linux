IWDG_KR寄存器：写入0xCCCC,开始启用看门狗，此时计数器开始从其复位值0xFFFF递减计数，当计数器计数到末尾0x0000时，会产生一个复位信号（IWDG_RESET）,只要键寄存器 IWDG_KR 中被写入 0xAAAA， IWDG_RLR 中的值就会被重新加载到计数器中从而避免产生看门狗复位 

IWDG_PR寄存器和IWDG_RLR寄存器具有写保护功能。要想修改这两个寄存器的值，必须先向IWDG_KR寄存器写入0x5555。预分频寄存器（IWDG_PR），该寄存器用来设置看门狗时钟的分频系数，

最低为 4，最高位 256，该寄存器是一个 32 位的寄存器,重装载值寄存器IWDG_RLR，设置计数值。









T[6:0]就是 WWDG_CR 的低七位，W[6:0]即是 WWDG->CFR 的低七位。T[6:0]

就是窗口看门狗的计数器，而 W[6:0]则是窗口看门狗的上窗口，下窗口值是固定的（0X40）。

当窗口看门狗的计数器在上窗口值之外被刷新，或者低于下窗口值都会产生复位。

上窗口值（W[6:0]）是由用户自己设定的，根据实际要求来设计窗口值，但是一定要确保

窗口值大于 0X40，否则窗口就不存在了。

窗口看门狗的超时公式如下：

 Twwdg=(4096×2^WDGTB×(T[5:0]+1)) /Fpclk1;

其中：

Twwdg：WWDG 超时时间（单位为 ms）

Fpclk1：APB1 的时钟频率（单位为 Khz）

WDGTB：WWDG 的预分频系数

T[5:0]：窗口看门狗的计数器低 6 位







WWDG_CR 只有低八位有效，T[6：0]用来存储看门狗的计数器值，

随时更新的，每个窗口看门狗计数周期（4096×2^ WDGTB）减 1。当该计数器的值从 0X40 变

为 0X3F 的时候，将产生看门狗复位。

WDGA 位则是看门狗的激活位，该位由软件置 1，以启动看门狗，并且一定要注意的是该

位一旦设置，就只能在硬件复位后才能清零了

窗口看门狗的第二个寄存器是配置寄存器（WWDG_CFR）

![image-20230510084932653](D:\Git\git-space\image-20230510084932653.png)



最后我们要介绍的是状态寄存器（WWDG_SR），该寄存器用来记录当前是否有提前唤醒

的标志。该寄存器仅有位 0 有效，其他都是保留位。当计数器值达到 40h 时，此位由硬件置 1。

它必须通过软件写 0 来清除。对此位写 1 无效。